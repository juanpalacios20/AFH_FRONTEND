<div class="relative h-screen">
  <div class="card flex absolute top-0 left-0 p-4">
    <button pButton [routerLink]="['/progressOrder/info']">
      <i class="pi pi-arrow-left" pButtonIcon></i>
      <span pButtonLabel>Volver</span>
    </button>
  </div>
  <div class="w-full flex flex-col p-5 pt-20 gap-5">
    <h1 class="text-xl font-bold text-start">
      AFH: Seguimiento de trabajo → Información de la orden: 1-2025 → Agregar
      avance
    </h1>
    <div class="flex flex-col gap-2">
      <label class="font-bold text-start"
        >Código de la orden (autocompleta)</label
      >
      <input
        type="text"
        [(ngModel)]="orderCode"
        class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300"
      />
    </div>
    <div class="flex flex-col gap-2">
      <label class="font-bold text-start">Descripción avance</label>
      <textarea
        pTextarea
        [(ngModel)]="advanceDescription"
        rows="5"
        cols="30"
        variant="filled"
        class="border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring focus:border-blue-300"
      ></textarea>
    </div>
    <div class="flex flex-col gap-4">
      <h2 class="font-bold text-start">Anexos correspondientes</h2>
      <div
        *ngFor="let exhibit of exhibits; let i = index"
        class="relative border border-gray-300 rounded px-4 py-6 flex flex-col gap-4"
      >
        <button
          class="absolute cursor-pointer top-1 right-1 text-red-500 hover:text-red-700 text-xl font-bold"
          (click)="deleteExhibit(i)"
          title="Eliminar anexo"
        >
          ✖
        </button>
        <div class="flex flex-col gap-2">
          <label class="font-bold text-start"
            >Descripción del anexo {{ i + 1 }}</label
          >
          <textarea
            rows="3"
            class="border border-gray-300 rounded px-3 py-2 focus:outline-none"
            placeholder="Escriba una descripción..."
            [(ngModel)]="exhibit.tittle"
            name="descripcion{{ i }}"
          ></textarea>
        </div>
        <div class="flex flex-wrap gap-4">
          <div
            *ngFor="let image of exhibit.images; let j = index"
            class="relative w-32 h-32 border border-gray-300"
          >
            <button
              class="absolute top-1 right-1 cursor-pointer text-red-500 hover:text-red-700 font-bold"
              (click)="deleteImage(i, j)"
              title="Eliminar imagen"
            >
              ✖
            </button>
          </div>
        </div>
        <p-button
          label="Agregar imagenes"
          (onClick)="addImage(i)"
          class="flex justify-center"
        />
      </div>
      <p-button label="Agregar Anexo" fluid="true" (click)="addExhibit()" />
    </div>

    <div class="flex gap-4 justify-center mt-4">
      <p-button label="Aceptar" fluid="true" />
      <p-button label="Cancelar" fluid="true" severity="secondary" />
    </div>
  </div>
</div>
