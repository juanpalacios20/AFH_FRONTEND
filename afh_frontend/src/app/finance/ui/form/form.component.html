<p-dialog
  [modal]="true"
  [(visible)]="visible"
  [style]="{ width: '60rem' }"
  [closable]="false"
>
  <ng-template pTemplate="header">
    <div class="flex justify-between items-center w-full">
      <span>{{ this.actionTitle }}</span>
      <button
        type="button"
        class="p-dialog-header-icon p-dialog-header-close p-link cursor-pointer"
        (click)="confirmationClose()"
      >
        <span class="pi pi-times"></span>
      </button>
    </div>
  </ng-template>
  <p-toast position="top-right"></p-toast>
  <div class="w-full mx-auto rounded-xl justify-center mt-2">
    <div class="mb-4">
      <p-floatlabel class="mt-2" variant="on" required="true">
        <input
          pInputText
          type="text"
          [(ngModel)]="people"
          class="w-full bg-white text-black font-medium py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
        />
        <label>Persona que hace el ingreso </label>
      </p-floatlabel>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2">
      <div class="mb-4">
        <p-floatlabel variant="on" required="true">
          <input
            pInputText
            type="text"
            [(ngModel)]="amount"
            class="w-full bg-white text-black font-medium py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
          />
          <label>Cantidad </label>
        </p-floatlabel>
      </div>
      <p-datepicker
        [(ngModel)]="date"
        [showIcon]="true"
        (keydown)="blockTyping($event)"
        inputId="buttondisplay"
        [showOnFocus]="false"
        dateFormat="dd/mm/yy"
        fluid="true"
        size="large"
        [placeholder]="
            type === 'ingreso' ? 'Fecha del ingreso' : 'Fecha del egreso'
          "
      />
    </div>
    <div class="mb-4">
      <p-floatlabel class="mt-2" variant="on" required="true">
        <textarea
          pTextarea
          rows="5"
          cols="30"
          type="text"
          [(ngModel)]="reason"
          [ngModelOptions]="{ standalone: true }"
          class="w-full bg-white text-black font-medium py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
        ></textarea>
        <label>Motivo o concepto</label>
      </p-floatlabel>
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2">
      <div class="mb-4">
        <p-autocomplete
          [(ngModel)]="selectedTargetAccount"
          [suggestions]="filteredTargetAccount"
          (completeMethod)="filterTargetAccount($event)"
          [dropdown]="true"
          (keydown)="blockTyping($event)"
          fluid="true"
          size="large"
          [placeholder]="
            type === 'ingreso' ? 'Cuenta destino' : 'Cuenta origen'
          "
          class="w-full bg-white text-black font-normal py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
        ></p-autocomplete>
      </div>
      <div class="mb-4">
        <p-autocomplete
          [(ngModel)]="selectedPaymentMethod"
          [suggestions]="filteredPaymentMethod"
          (completeMethod)="filterPaymentMethod($event)"
          [dropdown]="true"
          size="large"
          (keydown)="blockTyping($event)"
          fluid="true"
          placeholder="Forma de pago"
          class="w-full bg-white text-black font-normal py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
        ></p-autocomplete>
      </div>
    </div>
    <div class="mb-4">
      <p-floatlabel class="mt-2" variant="on" required="true">
        <textarea
          pTextarea
          rows="5"
          cols="30"
          type="text"
          [(ngModel)]="observations"
          [ngModelOptions]="{ standalone: true }"
          class="w-full bg-white text-black font-medium py-3 rounded-lg transition focus:ring-2 focus:ring-primary-500"
        ></textarea>
        <label>Observaciones (Opcional)</label>
      </p-floatlabel>
    </div>
    <div>
      <div class="mb-6 relative bg-white p-3 rounded-md shadow-md">
        <div class="flex flex-wrap gap-3 mt-3 relative">
          <div class="relative group">
            <div class="relative inline-block">
              <img
                [src]="selectedImage"
                alt="preview"
                width="100"
                height="100"
                class="border rounded"
              />
            </div>
          </div>
        </div>

        <div class="justify-center mb-2 mt-2">
          <p-fileupload
            mode="basic"
            name="images"
            accept="image/*"
            multiple="true"
            chooseLabel="Seleccionar imÃ¡genes"
            [customUpload]="true"
          ></p-fileupload>
        </div>
      </div>

      <div class="flex justify-end gap-2 mt-10">
        <p-button styleClass="p-button-secondary"> Cancelar </p-button>
        <p-button styleClass="p-button-primary" [loading]="loading">
          {{ actionTitle }}
        </p-button>
      </div>
    </div>
  </div>
</p-dialog>
