<p-dialog
  header="Información completa"
  [(visible)]="visible"
  [modal]="true"
  [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
  [style]="{ width: '60vw', color: '#2f7d3a' }"
  [draggable]="false"
  [resizable]="false"
  [closable]="true"
  (onHide)="close()"
>
  <!-- ======= Información general para ingresos y egresos ======= -->
  <div class="flex flex-col gap-4" *ngIf="visibleIncome || visibleExpense">
    <!-- mobile-first: flex-col; en md+ se convierte en grid 2 columnas -->
    <div class="flex flex-col md:grid md:grid-cols-2 gap-4">
      <div class="w-full serenityBlue">
        <p>
          <span class="font-semibold">Responsable:</span>
          {{ type === "ingreso" ? income?.responsible : expense?.responsible }}
        </p>
      </div>

      <div class="w-full">
        <p
          [class]="
            type === 'ingreso'
              ? 'font-semibold text-green-600'
              : 'font-semibold text-red-600'
          "
        >
          <span class="font-semibold serenityBlue">Cantidad:</span>
          {{
            type === "ingreso"
              ? "+" + income?.amount_formatted
              : "-" + expense?.amount_formatted
          }}
        </p>
      </div>

      <div class="w-full">
        <p class="serenityBlue">
          <span class="font-semibold">Cuenta:</span>
          {{
            type === "ingreso"
              ? income?.destination_account_info?.name
              : expense?.origin_account_info?.name
          }}
        </p>
      </div>

      <div class="w-full grid grid-cols-1 md:grid-cols-1">
        <p class="serenityBlue">
          <span class="font-semibold">Fecha:</span>
          {{ type === "ingreso" ? income?.date : expense?.date }}
        </p>
      </div>

      <div class="w-full grid grid-cols-1 md:grid-cols-1 ">
        <p class="serenityBlue">
          <span class="font-semibold">Metodo de pago:</span>
          {{
            type === "ingreso"
              ? income?.payment_method
              : expense?.payment_method
          }}
        </p>
      </div>

      <!-- corregido flex'col -> flex-col y añadí w-full -->
      <div class="w-full flex flex-col">
        <p class="serenityBlue">
          <span class="font-semibold">Motivo o concepto:</span>
          {{ type === "ingreso" ? income?.reason : expense?.reason }}
        </p>
      </div>

      <div class="w-full flex flex-col">
        <p class="serenityBlue">
          <span class="font-semibold">Observaciones:</span>
          {{
            type === "ingreso"
              ? income?.observations || "Sin observaciones adicionales"
              : expense?.observations || "sin observaciones adicionales"
          }}
        </p>
      </div>

      <!-- Voucher: que ocupe todo el ancho en mobile y también en md span 2 columnas -->
      <div
        class="w-full md:col-span-2"
        *ngIf="type === 'ingreso' ? income?.voucher : expense?.voucher"
      >
        <h2 class="text-primary-900 font-bold text-xl mb-2">
          Imagen del comprobante:
        </h2>
        <div class="p-4 mb-4 border rounded-lg bg-gray-50 shadow-sm">
          <div class="flex flex-wrap gap-3">
            <img
              [src]="type === 'ingreso' ? income?.voucher : expense?.voucher"
              alt="Comprobante"
              class="max-w-[150px] h-auto rounded border shadow-sm"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- ======= Información general para ingresos y egresos ======= -->

  <!-- ======= Información cuenta ======= -->
  <div *ngIf="visibleAccount" class="flex flex-col gap-4">
    <div class="flex flex-col md:grid md:grid-cols-2 gap-2">
      <div class="w-full serenityBlue">
        <p>
          <span class="font-semibold">Nombre de la cuenta:</span>
          {{ account?.name }}
        </p>
      </div>

      <div class="w-full">
        <p class="serenityBlue">
          <span class="font-semibold">Monto en la cuenta:</span>
          {{ account?.initial_amount_formatted }}
        </p>
      </div>

      <div class="w-full">
        <p class="serenityBlue">
          <span class="font-semibold">Tipo de cuenta:</span>
          {{ account?.type === 1 ? "Banco" : "Caja" }}
        </p>
      </div>

      <div class="w-full md:col-span-1 flex items-start">
        <p class="serenityBlue">
          <span class="font-semibold">Fecha de creación:</span>
          {{ account?.created_at | date : "dd/MM/yyyy HH:mm" }}
        </p>
      </div>
    </div>
  </div>
  <!-- ======= Información cuenta ======= -->
</p-dialog>
